<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Desk Dashboard</title>
    <style>
        body, html { 
            margin: 0; 
            padding: 0; 
            height: 100dvh; 
            overflow: hidden; 
            background: #121212; 
            color: white; 
            font-family: sans-serif; 
        }

        #container { 
            display: flex; 
            flex-direction: column; 
            height: 100dvh; 
        }

        /* Clock area shrunk to 25% height */
        #clock-area { 
            height: 25%; 
            display: flex; 
            flex-direction: column;
            align-items: center; 
            justify-content: center; 
            background: #1a1a1a; 
            border-bottom: 2px solid #333; 
        }

        #clock { font-size: 15vw; font-weight: bold; font-family: monospace; color: #00ff00; line-height: 1; }
        /* Date slightly increased from 2vw to 3vw */
        #date { font-size: 3vw; font-weight: normal; font-family: monospace; color: #888; margin-top: 5px; text-transform: uppercase; }

        #drawing-area { 
            flex-grow: 1; 
            position: relative; 
            background: #121212; 
        }

        canvas { 
            display: block;
            width: 100%; 
            height: 100%; 
            touch-action: none; 
            z-index: 1; 
        }

        #controls { 
            position: fixed; 
            bottom: 20px; 
            right: 20px; 
            z-index: 9999; 
            display: flex;
            gap: 10px;
        }

        button { 
            padding: 14px 22px; 
            background: #333; 
            color: white; 
            border: 1px solid #555; 
            border-radius: 8px; 
            cursor: pointer; 
            font-weight: bold; 
            font-size: 14px;
            /* Clear lint error by adding standard property */
            appearance: none;
            -webkit-appearance: none; 
            -moz-appearance: none; /* Optional: for older Firefox versions */
            touch-action: manipulation;
            user-select: none;
        }

        #clear-btn { background: #cc0000; border-color: #ff4444; }

        button:active { opacity: 0.8; }
    </style>
</head>
<body>

<div id="container">
    <div id="clock-area">
        <div id="clock">00:00:00</div>
        <div id="date">01-Jan-1970</div>
    </div>

    <div id="drawing-area">
        <canvas id="canvas"></canvas>
    </div>
</div>

<div id="controls">
    <button id="fullscreen-btn">Full Screen</button>
    <button id="clear-btn">Clear Notes</button>
</div>

<script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const clockEl = document.getElementById('clock');
    const dateEl = document.getElementById('date');
    let drawing = false;

    function updateDisplay() {
        const now = new Date();
        clockEl.textContent = now.toLocaleTimeString('en-AU', { hour12: false });
        const day = String(now.getDate()).padStart(2, '0');
        const month = now.toLocaleString('en-AU', { month: 'short' });
        const year = now.getFullYear();
        dateEl.textContent = `${day}-${month}-${year}`;
    }
    setInterval(updateDisplay, 1000);
    updateDisplay();

    function setupCanvasStyles() {
        ctx.strokeStyle = "#ffffff";
        ctx.lineWidth = 4;
        ctx.lineCap = "round";
        ctx.lineJoin = "round";
    }

    function saveCanvas() {
        localStorage.setItem('savedDrawing', canvas.toDataURL());
    }

    function loadCanvas() {
        const dataURL = localStorage.getItem('savedDrawing');
        if (dataURL) {
            const img = new Image();
            img.onload = () => ctx.drawImage(img, 0, 0);
            img.src = dataURL;
        }
    }

    function resize() {
        const tempImage = canvas.toDataURL();
        canvas.width = canvas.offsetWidth;
        canvas.height = canvas.offsetHeight;
        setupCanvasStyles();
        const img = new Image();
        img.onload = () => ctx.drawImage(img, 0, 0);
        img.src = tempImage;
    }

    window.addEventListener('resize', resize);
    canvas.width = canvas.offsetWidth;
    canvas.height = canvas.offsetHeight;
    setupCanvasStyles();
    loadCanvas();

    function start(e) { drawing = true; draw(e); }
    function stop() { 
        if (drawing) {
            drawing = false; 
            ctx.beginPath(); 
            saveCanvas(); 
        }
    }

    function draw(e) {
        if (!drawing) return;
        const rect = canvas.getBoundingClientRect();
        const x = (e.clientX || (e.touches && e.touches[0].clientX)) - rect.left;
        const y = (e.clientY || (e.touches && e.touches[0].clientY)) - rect.top;
        ctx.lineTo(x, y);
        ctx.stroke();
        ctx.beginPath();
        ctx.moveTo(x, y);
    }

    canvas.addEventListener('pointerdown', start);
    window.addEventListener('pointermove', draw);
    window.addEventListener('pointerup', stop);

    // Clear Logic
    document.getElementById('clear-btn').addEventListener('pointerdown', (e) => {
        e.stopPropagation();
        if (confirm("Clear all notes?")) {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            localStorage.removeItem('savedDrawing');
        }
    });

    // Full Screen Logic
    document.getElementById('fullscreen-btn').addEventListener('click', (e) => {
        e.stopPropagation();
        if (!document.fullscreenElement) {
            document.documentElement.requestFullscreen().catch(err => {
                alert(`Error: ${err.message}`);
            });
        } else {
            document.exitFullscreen();
        }
    });
</script>

</body>
</html>
